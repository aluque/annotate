<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Annotate</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Toolbar -->
<div id="toolbar">
  <div class="app-logo">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75">
      <rect x="3" y="3" width="18" height="18" rx="2"/>
      <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor" stroke="none"/>
      <polyline points="21 15 16 10 5 21"/>
    </svg>
    Annotate
  </div>

  <div class="sep"></div>

  <button class="btn btn-tool active" id="btn-select" title="Select tool" onclick="setMode('select')">
    <svg width="13" height="13" viewBox="0 0 24 24" fill="currentColor" stroke="none">
      <path d="M4 2l16 10-7 1.5-3.5 7.5z"/>
    </svg>
    Select <kbd>S</kbd>
  </button>
  <button class="btn btn-tool" id="btn-point" title="Add point" onclick="setMode('point')">
    <svg width="13" height="13" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="5"/></svg>
    Point <kbd>P</kbd>
  </button>
  <button class="btn btn-tool" id="btn-line" title="Add line" onclick="setMode('line')">
    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
      <line x1="4" y1="20" x2="20" y2="4"/>
    </svg>
    Line <kbd>L</kbd>
  </button>
  <button class="btn btn-tool" id="btn-rect" title="Add rectangle" onclick="setMode('rect')">
    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="3" y="5" width="18" height="14" rx="1.5"/>
    </svg>
    Rect <kbd>R</kbd>
  </button>

  <div class="sep"></div>

  <button class="btn btn-file" onclick="document.getElementById('file-input').click()">
    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M13 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V9z"/>
      <polyline points="13 2 13 9 20 9"/>
    </svg>
    Open Image
  </button>

  <div class="sep"></div>

  <button class="btn btn-import" onclick="document.getElementById('json-input').click()">
    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
      <polyline points="17 8 12 3 7 8"/>
      <line x1="12" y1="3" x2="12" y2="15"/>
    </svg>
    Import JSON
  </button>

  <button class="btn btn-export" id="btn-export" onclick="downloadJSON()">
    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
      <polyline points="7 10 12 15 17 10"/>
      <line x1="12" y1="15" x2="12" y2="3"/>
    </svg>
    Export JSON
  </button>

  <button class="btn btn-clear" onclick="clearAnnotations()">
    <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="3 6 5 6 21 6"/>
      <path d="M19 6l-1 14a2 2 0 01-2 2H8a2 2 0 01-2-2L5 6"/>
      <path d="M10 11v6M14 11v6"/>
      <path d="M9 6V4a1 1 0 011-1h4a1 1 0 011 1v2"/>
    </svg>
    Clear All
  </button>

  <label class="theme-toggle" title="Switch to light theme">
    <input type="checkbox" id="theme-checkbox" onchange="toggleTheme(this.checked)">
    <span class="theme-tick">
      <svg width="9" height="9" viewBox="0 0 10 10" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="1.5,5 4,7.5 8.5,2.5"/>
      </svg>
    </span>
    Light theme
  </label>

  <input type="file" id="file-input" accept="image/*">
  <input type="file" id="json-input" accept=".json">
</div>

<!-- Main -->
<div id="main">

  <!-- Sidebar -->
  <div id="sidebar">
    <div class="sidebar-section-header">
      Annotations
      <span id="ann-count">0</span>
    </div>
    <div id="annotation-list"></div>
    <div id="zoom-panel">
      <div class="zoom-header">
        Zoom <span class="zoom-factor">4×</span>
      </div>
      <canvas id="zoom-canvas"></canvas>
    </div>
  </div>

  <!-- Canvas area -->
  <div id="canvas-area">
    <div id="drop-zone">
      <svg width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
        <rect x="3" y="3" width="18" height="18" rx="2"/>
        <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor" stroke="none"/>
        <polyline points="21 15 16 10 5 21"/>
      </svg>
      <h2>Open an image to begin</h2>
      <p>Click "Open Image" above, or drag &amp; drop an image file here</p>
    </div>
    <div id="canvas-wrapper">
      <canvas id="main-canvas"></canvas>
      <div id="coords-hud">—</div>
    </div>
  </div>

</div>

<!-- Status bar -->
<div id="statusbar">
  <span>Tool: <span id="status-mode">Select</span></span>
  <span>
    <span class="sb-key">S</span> Select &nbsp;
    <span class="sb-key">P</span> Point &nbsp;
    <span class="sb-key">L</span> Line &nbsp;
    <span class="sb-key">R</span> Rect &nbsp;
    <span class="sb-key">Del</span> Delete &nbsp;
    <span class="sb-key">Esc</span> Cancel
  </span>
  <span id="status-hint"></span>
</div>

<script src="app.js"></script>
</body>
</html>
